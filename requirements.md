# 需求文档

## 介绍

ZWY项目信息跟踪管理系统是一个简洁的web应用程序，用于管理ZWY项目（3单元和4单元两栋楼）的房间质量问题、整改进展、客户沟通和房间状态。系统支持管理员分配房间给不同角色的用户，各角色用户根据权限维护分配房间的信息，管理员可查看汇总数据。

项目结构：
- 两栋楼：3单元、4单元
- 每层4户：01、02、03、04号房
- 房间号格式：楼层+房号（如303表示3楼03号房）

用户角色：
- 管理员：系统管理和汇总查看
- 客户大使：负责客户沟通进展和质量问题验收
- 项目工程师：负责质量问题填写和验收
- 维修工程师：负责质量问题填写和验收

## 需求

### 需求 1 - 用户和房间分配管理

**用户故事：** 作为管理员，我希望能够创建不同角色的用户账号并分配具体的楼栋和房号给用户，以便各角色用户根据权限维护对应房间的信息。

#### 验收标准

1. 当管理员登录系统时，系统应提供用户管理功能
2. 当管理员创建用户时，系统应记录用户姓名、登录账号、密码和角色（客户大使/项目工程师/维修工程师）
3. 当管理员分配房间时，系统应支持选择楼栋（3单元/4单元）和具体房号分配给用户
4. 当用户登录时，系统应只显示分配给该用户的房间信息

### 需求 2 - 质量问题管理

**用户故事：** 作为项目工程师/维修工程师/客户大使，我希望能够根据我的角色权限管理分配给我的房间的质量问题，以便跟踪问题的发现、整改和验收过程。

#### 验收标准

1. 当项目工程师、维修工程师或客户大使添加质量问题时，系统应记录填写人角色、问题描述、问题照片，并自动填入当前日期（日期不可修改）
2. 当用户上传问题照片时，系统应支持常见图片格式（jpg、png等）并进行适当压缩存储
3. 当任何被分配权限的用户查看房间信息时，系统应实时显示该房间的所有质量问题，包括填写人角色和填写时间
4. 当项目工程师、维修工程师或客户大使进行质量问题验收时，系统应允许他们标记问题为"已验收"状态，并记录验收人角色

### 需求 3 - 客户沟通管理

**用户故事：** 作为客户大使，我希望能够记录和维护分配给我的房间的客户沟通进展，以便跟踪客户关系和沟通历史。

#### 验收标准

1. 当客户大使添加沟通记录时，系统应记录填写人角色（客户大使）、沟通内容、客户反馈，并自动填入当前日期
2. 当被分配权限的项目工程师、维修工程师查看房间信息时，系统应实时显示该房间的所有客户沟通记录，包括填写人角色和填写时间
3. 当任何被分配权限的用户查看客户沟通记录时，系统应清楚显示每条记录的填写人角色，但只有客户大使可以编辑
4. 当有新的沟通记录添加时，系统应确保所有被分配该房间权限的用户都能及时看到更新信息

### 需求 4 - 房间状态自动跟踪

**用户故事：** 作为系统用户，我希望系统能够根据房间的质量问题和验收情况自动更新房间状态，以便准确反映房间的实际进展情况。

#### 验收标准

1. 当房间存在未验收的质量问题时，系统应自动将房间状态设置为"整改中"
2. 当房间的所有质量问题都已验收关闭时，系统应自动将房间状态设置为"闭户"
3. 当管理员或有权限的用户手动更新房间状态时，系统应支持以下状态：整改中、闭户、已交付、已签约
4. 当房间状态变更时，系统应自动记录变更时间和操作用户，并显示状态变更历史

### 需求 5 - 管理员汇总查看

**用户故事：** 作为管理员，我希望能够查看所有房间的汇总信息，并能按楼层筛选查看不同区间段的汇总信息，以便了解项目整体进展和做出管理决策。

#### 验收标准

1. 当管理员访问汇总页面时，系统应显示所有房间的当前状态统计（整改中、闭户、已交付、已签约的房间数量）
2. 当管理员勾选特定楼层时，系统应只显示选中楼层房间的汇总统计信息
3. 当管理员查看房间详情时，系统应显示该房间的完整信息（质量问题、客户沟通、状态历史）
4. 当管理员需要导出数据时，系统应支持导出Excel格式的汇总报表，包含选中楼层的详细信息

### 需求 6 - 角色权限认证

**用户故事：** 作为系统用户，我希望能够安全登录系统并根据我的角色只能访问相应权限的功能，以便保证数据安全和操作规范。

#### 验收标准

1. 当用户访问系统时，系统应要求用户登录并验证角色权限
2. 当管理员登录时，系统应提供完整的管理功能（用户管理、房间分配、汇总查看）
3. 当客户大使登录时，系统应只允许查看分配房间和编辑客户沟通记录，可参与质量问题验收
4. 当项目工程师或维修工程师登录时，系统应允许查看分配房间、添加质量问题和参与质量问题验收，但不能编辑客户沟通记录
### 需求 7 
- 信息透明和实时共享

**用户故事：** 作为被分配房间权限的用户，我希望能够实时看到其他角色用户对同一房间的信息更新，并清楚知道每条信息的填写人，以便实现信息扁平化管理。

#### 验收标准

1. 当任何被分配权限的用户（客户大使、项目工程师、维修工程师）查看房间信息时，系统应实时显示该房间的所有最新信息
2. 当用户查看房间的质量问题、客户沟通记录时，系统应清楚标识每条记录的填写人角色和填写时间
3. 当有用户更新房间信息时，系统应确保其他被分配该房间权限的用户能够及时看到更新
4. 当用户查看信息历史时，系统应按时间顺序显示所有操作记录，包括操作人角色和操作时间